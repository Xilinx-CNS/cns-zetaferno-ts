#!/bin/bash
# SPDX-License-Identifier: Apache-2.0
# (c) Copyright 2016 - 2022 Xilinx, Inc. All rights reserved.
pushd zetaferno-ts >/dev/null

help() {
    cat <<EOF
This is a wrapper script which builds the autogenerated part of the
Test Environment documentation.

NOTE! Environment TE_BASE=<TE sources> must be set.

Usage:
  $ gen_doxygen

Documentation will be located at zetaferno-ts/doc/html/
EOF

    exit 0
}

[ "x$1" = "x--help" ] || [ "x$1" = "x-h" ] && help

if test -z "$TE_BASE" ; then
    echo "Specify TE_BASE variable to TE sources root directory." >&2
    exit 0
fi

"${TE_BASE}"/scripts/dox_process zf "Zetaferno Test Suite"

doxygen > /dev/null

echo "" >&2
echo "See file://$(pwd)/doc/html/index.html" >&2

popd >/dev/null
